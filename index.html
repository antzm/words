<!DOCTYPE html>
<html lang='en'>
<head>
	<meta charset='UTF-8'>
	<title>Learning Words</title>

<script>

// The arrays myWords01, myWords02, myWords03,
// myWords04 and myWords05 contain english
// words and their translations.
// Each word and its meanings are inside
// an array and a whole group of words
// are included inside the mywords.. arrays.
// Each one of those smaller arrays, contains an english word, 
// as the first element of the array,
// and the meaning or meanings of the english word.
// There can be only one engish word in each array,
// but there is no limit on how many meaning can be included.

// English words to Greek words
	
const myWords01 = [
	['kitchen', 'κουζίνα'],
	['under', 'κάτω'],
	['snow', 'χιόνι'],
	['cake', 'κέικ'],
	['water', 'νερό'],
	['bathroom', 'μπάνιο'],
	['living room', 'σαλόνι', 'καθιστικό'],
	['eye', 'μάτι'],
	['hair', 'μαλλιά'],
	['head', 'κεφάλι'],
	['leg', 'πόδι'],
	['foot', 'πατούσα'],
	['arm', 'βραχίονας'],
	['hand', 'χέρι'],
	['book', 'βιβλίο'],
	['look', 'κοιτάω', 'κοιτάζω', 'κοιτώ'],
	['watch', 'παρατηρώ', 'ρολόι']
];

const myWords02 = [
	['s2word00', 'meaning00a'],
	['s2word01', 'meaning01a', 'meaning01b'],
	['s2word02', 'meaning02a', 'meaning02b', 'meaning02c'],
	['s2word03', 'meaning03a', 'meaning03b', 'meaning03c', 'meaning03d'],
	['s2word04', 'meaning04a', 'meaning04b', 'meaning04c', 'meaning04d', 'meaning04e'],
	['s2word05', 'meaning05a'],
	['s2word06', 'meaning06a', 'meaning06b'],
	['s2word07', 'meaning07a', 'meaning07b', 'meaning07c'],
	['s2word08', 'meaning08a', 'meaning08b', 'meaning08c', 'meaning08d'],
	['s2word09', 'meaning09a', 'meaning09b', 'meaning09c', 'meaning09d', 'meaning09e']
];

const myWords03 = [
	['s3word00', 'meaning00a'],
	['s3word01', 'meaning01a', 'meaning01b'],
	['s3word02', 'meaning02a', 'meaning02b', 'meaning02c'],
	['s3word03', 'meaning03a', 'meaning03b', 'meaning03c', 'meaning03d'],
	['s3word04', 'meaning04a', 'meaning04b', 'meaning04c', 'meaning04d', 'meaning04e'],
	['s3word05', 'meaning05a'],
	['s3word06', 'meaning06a', 'meaning06b'],
	['s3word07', 'meaning07a', 'meaning07b', 'meaning07c'],
	['s3word08', 'meaning08a', 'meaning08b', 'meaning08c', 'meaning08d'],
	['s3word09', 'meaning09a', 'meaning09b', 'meaning09c', 'meaning09d', 'meaning09e']
];

const myWords04 = [
	['s4word00', 'meaning00a'],
	['s4word01', 'meaning01a', 'meaning01b'],
	['s4word02', 'meaning02a', 'meaning02b', 'meaning02c'],
	['s4word03', 'meaning03a', 'meaning03b', 'meaning03c', 'meaning03d'],
	['s4word04', 'meaning04a', 'meaning04b', 'meaning04c', 'meaning04d', 'meaning04e'],
	['s4word05', 'meaning05a'],
	['s4word06', 'meaning06a', 'meaning06b'],
	['s4word07', 'meaning07a', 'meaning07b', 'meaning07c'],
	['s4word08', 'meaning08a', 'meaning08b', 'meaning08c', 'meaning08d'],
	['s4word09', 'meaning09a', 'meaning09b', 'meaning09c', 'meaning09d', 'meaning09e']
];

const myWords05 = [
	['s5word00', 'meaning00a'],
	['s5word01', 'meaning01a', 'meaning01b'],
	['s5word02', 'meaning02a', 'meaning02b', 'meaning02c'],
	['s5word03', 'meaning03a', 'meaning03b', 'meaning03c', 'meaning03d'],
	['s5word04', 'meaning04a', 'meaning04b', 'meaning04c', 'meaning04d', 'meaning04e'],
	['s5word05', 'meaning05a'],
	['s5word06', 'meaning06a', 'meaning06b'],
	['s5word07', 'meaning07a', 'meaning07b', 'meaning07c'],
	['s5word08', 'meaning08a', 'meaning08b', 'meaning08c', 'meaning08d'],
	['s5word09', 'meaning09a', 'meaning09b', 'meaning09c', 'meaning09d', 'meaning09e']
];

</script>

<style>

body {
	font-family: Arial;
}


/* introductory text */
.intro {
	text-align: center;
}

.main-content {
	font-size: 18px;
	text-align: center;
}

.main-content-info {
	font-size: 16px;
	font-style: italic;
}


/* language selection */
.language-select {
	text-align: center;
	font-size: 14px;
	margin-bottom: 15px;
}


/* upper and lower buttons */
.buttons {
	text-align: center;
	display: inline-block;
	background-color: #3d94f6;
	border: 1px solid #337fed;
	color: #ffffff;
	font-family: Arial;
	font-size: 15px;
	font-weight: bold;
	padding: 6px 24px;
	margin: 3px;
	text-decoration:none;
	text-shadow: 0px 1px 0px #1570cd;
	border-radius: 4px;
}

.buttons:hover {
	background-color: #00008b;
}

.button-group-upper,
.button-group-lower {
	text-align: center;
	list-style-type: none;
	margin: auto;
	display: flex;
	flex-direction: row;
	justify-content: center;
	flex-wrap: wrap;
}


/* display the quest word */
.display-option {
	margin: 3px;
}

.display-yes {
	display: block;
}

.display-no {
	display: none;
}

.display-words {
	text-align: center;
}

.message-word {
	font-size: 16px;
	font-style: italic;
}

.question-word {
	font-size: 21px;
	font-weight: bold;
}


/* answer form */
.answer-form {
	text-align: center;
	font-size: 18px;
	margin-top: 36px;
	margin-bottom: 36px;
}

#writeAnswer {
	font-size: 16px;
	padding: 5px;
	border: 2px solid #1e90ff;
}


/* display if the answer is correct */
.display-results {
	text-align: center;
}

.show-results {
	visibility: show;
}

.hide-results {
	visibility: hidden;
}

.display-answer-result {
	margin-top: 36px;
	margin-bottom: 36px;
}

.answer-result {
	font-size: 20px;
	font-weight: bold;
	margin-top: 18px;
	margin-bottom: 8px;
}
.correct-answer {
	font-size: 21px;
	margin-top: 3px;
	margin-bottom: 28px;
	color: #00f;
}
.not-correct-answer {
	font-size: 21px;
	margin-top: 3px;
	margin-bottom: 28px;
	color: #f00;
}

/* display the comlete answer */
.display-complete-answer {
	text-align: center;
}

.complete-answer {
	font-size: 20px;
	margin-top: 3px;
	margin-bottom: 28px;
}

</style>

</head>
<body>

	<h1 class='intro'>Learning Words</h1>
	<p class='main-content'>This page will help you to learn new words!</p>
	<p class='main-content main-content-info'>to start, choose a language and a level...</p>

<diV class='language-select'>

<!--
Radio buttons for selecting English or Greek words
-->
<form>
	<input type="radio" name="select-language" id="lang-en" value="en-words" checked="checked">
	<label for="lang-en">English words</label>
	<input type="radio" name="select-language" id="lang-gr" value="gr-words">
	<label for="lang-gr">Greek words</label>	
</form>

</diV>

	<ul class='button-group-upper'>
		<li><button class='buttons button-1' type='button'>Level 1</button></li>
		<li><button class='buttons button-2' type='button'>Level 2</button></li>
		<li><button class='buttons button-3' type='button'>Level 3</button></li>
		<li><button class='buttons button-4' type='button'>Level 4</button></li>
		<li><button class='buttons button-5' type='button'>Level 5</button></li>
	</ul>

<div class='display-option display-no'>

	<div class="display-words">
		<p class="message-word">...and now, please, write the meaning of the word:</p>
		<p class="question-word">English or Greek Word</p>
	
	</div>


<!--
This is the form where a small input box appears
so that the answer could be written.
Pressing enter, calls the function handleForm().
Also, instead of pressing enter, 
the button Check answer could be clicked
-->

	<form class='answer-form' action='javascript:handleForm()'>
		<label for='writeAnswer'>Answer:</label>
		<input type='text' name='write-answer' id='writeAnswer' autocomplete='off'>
		<!-- <input type='submit' value='Submit answer'> -->
		<input type="reset" value="Reset">
	</form>

<!-- 
Displays either "Correct answer!" or "The correct answer is:".
The text is hidden and appears as soon as we subit an answer.
Classes "status-show-result" and "status-hide-result" allow to show or hide this text.
The functions "correctAnswer()" and "notCorrectAnswer()" control this behavior.
-->

<section class='display-results show-results'>

	<div class='display-answer-result'>
		<p class='answer-result'>Display answer correct or not correct</p>
	</div>

<!--
If the answer is not correct, it displays the correct word or the correct words.
This text is hidden and appears only whenever an answer is not correct.
Classes "status-show-answer" and "status-hide-answer" allow to show or hide this text.
The functions ... control this behavior.
-->
	<div class='display-complete-answer'>
		<p class='complete-answer'>After check, always display the complete answer</p>
	</div>

</section>

	<ul class='button-group-lower'>
		<li><button class='buttons button-6' type='button'>Previous Question</button></li>
		<li><button class='buttons button-7' type='button'>Check Answer</button></li>
		<li><button class='buttons button-8' type='button'>Next Question </button></li>
	</ul>

</div>

<script>

let wordQuiz;
let randomWordQuiz;
let index;

enableListeners();

// This function checks the two radio buttons at the top of the page,
// and depending if english words is checked, then it returns true.
// otherwise, if greek words is checked, it returns false.
// In a case of an error, if for whatever reason, no button is checked
// then this function returns a default value of true, i.e. assuming
// that english words had been selected.
//
function englishWords() {
	let englishWordsCheck = document.getElementById('lang-en').checked;
	let greekWordsCheck = document.getElementById('lang-gr').checked;
	if (!englishWordsCheck && !greekWordsCheck) {
		englishWordsCheck = true;
	}
	return englishWordsCheck;
}

// This function adds the event listeners to the buutons.
// There is one event listener for the upper buttons
// and one event listener for the lower buttons.
//
function enableListeners() {
	const buttonListUpper = document.querySelector('.button-group-upper');
	buttonListUpper.addEventListener('click', activateUpperButtons);
	const buttonListLower = document.querySelector('.button-group-lower');
	buttonListLower.addEventListener('click', activateLowerButtons);	
}

// This function uses the evt parameter,
// which is automatically transmited whenever 
// an upper button is clicked,
// and depending on its value
// the code for the correct key
// is executed.
//
function activateUpperButtons(evt) {
	if (evt.target.classList.contains('button-1')) {
		wordQuiz = myWords01;
		initializeGame();
	}
	if (evt.target.classList.contains('button-2')) {
		wordQuiz = myWords02;
		initializeGame();
	}
	if (evt.target.classList.contains('button-3')) {
		wordQuiz = myWords03;
		initializeGame();	
	}
	if (evt.target.classList.contains('button-4')) {
		wordQuiz = myWords04;
		initializeGame();
	}
	if (evt.target.classList.contains('button-5')) {
		wordQuiz = myWords05;
		initializeGame();
	}
}

// This function also uses the evt parameter,
// which is automatically transmited whenever 
// a lowe button is clicked,
// and depending on its value
// the code for the correct key
// is executed.
//
function activateLowerButtons(evt) {
	if (evt.target.classList.contains('button-6')) {
		previousQuestion();
	}
	if (evt.target.classList.contains('button-7')) {
		if (index >= 0 && index < randomWordQuiz.length) {
			checkAnswer();
			showResults();
		}
	}
	if (evt.target.classList.contains('button-8')) {
		nextQuestion();
	}
}

function initializeGame() {
	index = 0;
	clearForm();
	startQuiz();
	questWord();
}

// randomizeArray(randArray) randomizes an array
// by taking out the first element and then
// placing it back at a random position
// inside the array. This process is repeated
// for every element of the array.
//
function randomizeArray(randArray) {
	for (let i = 0; i < randArray.length; i++) {
		let firstElement = randArray.shift();
		randArray.splice(randomNumber(randArray.length), 0, firstElement);
	}
	return randArray;
}

// randomNumber(max) returns a random integer
// between 0 and max (including 0 and max)
//
function randomNumber(max) {
	let randNum = Math.floor(Math.random()*(max+1));
	return randNum;
}

// randomNaturalNumber(max) returns a random integer
// between 1 and max (including 1 and max)
//
function randomNaturalNumber(max) {
	let randNatNum = Math.ceil(Math.random()*max);
	return randNatNum;
}

function startQuiz() {
	const displayStatus = document.querySelector('.display-option');
	if (displayStatus.className === 'display-option display-no') {
		displayStatus.className = 'display-option display-yes';
	}
	randomWordQuiz = randomizeArray(wordQuiz);
	arrowButtonListeners();
	hideResults();
}

// This function selects a ranodm eEglsh word,
// or a random Greek word and displays it.
// If englishWords() function returns true,
// then an English word is selected, otherwise
// if it returns false, then a Greek word
// is selected and siplayed.
//
function questWord() {
	const newWord = document.querySelector('.question-word');
	if (englishWords()) {
			newWord.innerHTML = randomWordQuiz[index][0];
	} else {
		let wordsLength = randomWordQuiz[index].length;
		let position = randomNaturalNumber(wordsLength-1);
		let greekWord = randomWordQuiz[index][position];
		newWord.innerHTML = greekWord;
	}
}

// When using the previous question and next questions buttons,
// or the left and right keyboard arrows to move from one word to another,
// this function displays a message at the beggining of the words array.
//
function levelStart() {
	const displayMessage = document.querySelector('.question-word');
	displayMessage.innerHTML = 'Level Start!';
}

// When using the previous question and next questions buttons,
// or the left and right keyboard arrows to move from one word to another,
// this function displays a message at the end of the words array.
//
function levelComplete() {
	const displayMessage = document.querySelector('.question-word');
	displayMessage.innerHTML = 'Level Completed!';
}

// checkAnswer() checks if the answer is correct or not.
// It checks every meaning of the english word and if the
// answer matches at least one of the meanings, then
// the answer is correct. For every meaning checked,
// a booleean value of true or false is added in the
// array called 'answerStaus'. In the end, the sum
// of all the elements in the array is calcualted.
// The result can be either 0 or 1 as the array
// contains only boolean values of true(1) and false(0).
// Each time, only one true can be included in the array
// and thus, the sum of the array can only be 1 or 0.
// If the sum is 1, then the answer was correct,
// otherwise, if the sum is 0, then the answer was not correct.
// For simplicity, the exact same logic is used when 
// comparing an Engish answer to a Greek word, although
// only one English answer can be correct in this case.
//
function checkAnswer() {
	let inputAnswer = document.getElementById('writeAnswer').value;
	let answerStatus = [];	
	if (englishWords()) {
		for (i = 1; i < randomWordQuiz[index].length; i++) {
			if (inputAnswer === randomWordQuiz[index][i]) {
				answerStatus.push(true);
			} else {
				answerStatus.push(false);
			}	
		}
	} else {
		if (inputAnswer === randomWordQuiz[index][0]) {
			answerStatus.push(true);
		} else {
			answerStatus.push(false);
		}
	}
	let answerSum = 0;
	for (i = 0;  i < answerStatus.length; i++) {
		answerSum += answerStatus[i];
	}
	if (answerSum === 1) {
		correctAnswer();
	} else {
		notCorrectAnswer();
	}
}

function showResults() {
	const displayOptions = document.querySelector('.display-results');
	displayOptions.className = 'display-results show-results';
}

function hideResults() {
	const displayOptions = document.querySelector('.display-results');
	displayOptions.className = 'display-results hide-results';
}

function correctAnswer() {
	const displayText = document.querySelector('.answer-result');
	displayText.className = 'answer-result correct-answer';
	displayText.innerHTML = 'Congratulations! Correct answer!';
	const displayWords = document.querySelector('.complete-answer');
	displayWords.className = 'complete-answer correct-answer';
	displayAllMeanings();
}

function notCorrectAnswer() {
	const displayText = document.querySelector('.answer-result');
	displayText.className = 'answer-result not-correct-answer';
	displayText.innerHTML = 'The correct answer is:';
	const displayWords = document.querySelector('.complete-answer');
	displayWords.className = 'complete-answer not-correct-answer';
	displayAllMeanings();
}

function displayAllMeanings() {
	const displayText = document.querySelector('.complete-answer');
	let translationsArray = randomWordQuiz[index];
	let joinedWords = translationsArray.join(' / ');
	displayText.innerHTML = joinedWords;
}

// This function clears the form
// by assigning the value null and thus
// replacing the existing value of the form
//
function clearForm() {
	document.getElementById('writeAnswer').value = null;
}

// This function is calles whenever the enter button
// is pressed while inside the form window.
// If the index corrsponds to a word,
// then, it checks the answer and  it displays either the
// correct or then not correct resluts.
//
function handleForm() {
	if (index >= 0 && index < randomWordQuiz.length) {
		checkAnswer();
		showResults();
	}
}

// This function adds event listeners
// to the left and right arrow buttons
// on the keyboard. 
// To avoid pressing the keys continiously,
// the keys will function only when 
// they are released and not when pressed.
//
function arrowButtonListeners() {
	document.addEventListener('keyup', function(evt) {
	let keyPressed = evt.key;
	if (keyPressed == 'ArrowLeft') {
		previousQuestion();
	}
	if (keyPressed == 'ArrowRight') {
		nextQuestion();
	}
});
}

// This function shows the previous 
// quest word either by clicking
// the previous question button
// or by clicking the left
// arrow button on the keyboard.
//
function previousQuestion() {
	clearForm();
	hideResults();
	index--;
	if (index >= 0) {
		questWord();
	} else {
		index = -1;
		levelStart();
	}
}

// This function shows the next
// quest word either by clicking
// the next question button
// or by clicking the right
// arrow button on the keyboard.
function nextQuestion() {
	clearForm();
	hideResults();
	index++;
	if (index < randomWordQuiz.length) {
		questWord();
	} else {
		index = randomWordQuiz.length;
		levelComplete();
	}
}

</script>

</body>
</html>