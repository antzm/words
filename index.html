<!DOCTYPE html>
<html lang='en'>
<head>
	<meta charset='UTF-8'>
	<title>Learning Words</title>

<script>

// the array myWords contains multiple arrays.
// Each one of those arrays, contains an english word, 
// as the first element of the array,
// and the meaning or meanings of the english word.
// There can be only one engish word in each array,
// but there is no limit on how many meaning can be included.

// English words to Greek words
	
const myWords01 = [

['kitchen', 'κουζίνα'],
['under', 'κάτω'],
['snow', 'χιόνι'],
['cake', 'κέικ'],
['water', 'νερό'],
['bathroom', 'μπάνιο'],
['living room', 'σαλόνι', 'καθιστικό'],
['eye', 'μάτι'],
['hair', 'μαλλιά'],
['head', 'κεφάλι'],
['leg', 'πόδι'],
['foot', 'πατούσα'],
['arm', 'βραχίονας'],
['hand', 'χέρι'],
['book', 'βιβλίο'],
['look', 'κοιτάω', 'κοιτάζω', 'κοιτώ'],
['watch', 'παρατηρώ', 'ρολόι']

];

const myWords02 = [
	['s2word00', 'meaning00a'],
	['s2word01', 'meaning01a', 'meaning01b'],
	['s2word02', 'meaning02a', 'meaning02b', 'meaning02c'],
	['s2word03', 'meaning03a', 'meaning03b', 'meaning03c', 'meaning03d'],
	['s2word04', 'meaning04a', 'meaning04b', 'meaning04c', 'meaning04d', 'meaning04e'],
	['s2word05', 'meaning05a'],
	['s2word06', 'meaning06a', 'meaning06b'],
	['s2word07', 'meaning07a', 'meaning07b', 'meaning07c'],
	['s2word08', 'meaning08a', 'meaning08b', 'meaning08c', 'meaning08d'],
	['s2word09', 'meaning09a', 'meaning09b', 'meaning09c', 'meaning09d', 'meaning09e']
];

const myWords03 = [
	['s3word00', 'meaning00a'],
	['s3word01', 'meaning01a', 'meaning01b'],
	['s3word02', 'meaning02a', 'meaning02b', 'meaning02c'],
	['s3word03', 'meaning03a', 'meaning03b', 'meaning03c', 'meaning03d'],
	['s3word04', 'meaning04a', 'meaning04b', 'meaning04c', 'meaning04d', 'meaning04e'],
	['s3word05', 'meaning05a'],
	['s3word06', 'meaning06a', 'meaning06b'],
	['s3word07', 'meaning07a', 'meaning07b', 'meaning07c'],
	['s3word08', 'meaning08a', 'meaning08b', 'meaning08c', 'meaning08d'],
	['s3word09', 'meaning09a', 'meaning09b', 'meaning09c', 'meaning09d', 'meaning09e']
];

const myWords04 = [
	['s4word00', 'meaning00a'],
	['s4word01', 'meaning01a', 'meaning01b'],
	['s4word02', 'meaning02a', 'meaning02b', 'meaning02c'],
	['s4word03', 'meaning03a', 'meaning03b', 'meaning03c', 'meaning03d'],
	['s4word04', 'meaning04a', 'meaning04b', 'meaning04c', 'meaning04d', 'meaning04e'],
	['s4word05', 'meaning05a'],
	['s4word06', 'meaning06a', 'meaning06b'],
	['s4word07', 'meaning07a', 'meaning07b', 'meaning07c'],
	['s4word08', 'meaning08a', 'meaning08b', 'meaning08c', 'meaning08d'],
	['s4word09', 'meaning09a', 'meaning09b', 'meaning09c', 'meaning09d', 'meaning09e']
];

const myWords05 = [
	['s5word00', 'meaning00a'],
	['s5word01', 'meaning01a', 'meaning01b'],
	['s5word02', 'meaning02a', 'meaning02b', 'meaning02c'],
	['s5word03', 'meaning03a', 'meaning03b', 'meaning03c', 'meaning03d'],
	['s5word04', 'meaning04a', 'meaning04b', 'meaning04c', 'meaning04d', 'meaning04e'],
	['s5word05', 'meaning05a'],
	['s5word06', 'meaning06a', 'meaning06b'],
	['s5word07', 'meaning07a', 'meaning07b', 'meaning07c'],
	['s5word08', 'meaning08a', 'meaning08b', 'meaning08c', 'meaning08d'],
	['s5word09', 'meaning09a', 'meaning09b', 'meaning09c', 'meaning09d', 'meaning09e']
];

</script>

<style>

body {
	font-family: Arial;
}

.intro {
	text-align: center;
}

.main-content {
	font-size: 18px;
	text-align: center;
}

.main-content-info {
	font-size: 16px;
	font-style: italic;
}

.language-select {
	text-align: center;
	font-size: 14px;
	margin-bottom: 15px;
}

.buttons {
	text-align: center;
	display: inline-block;
	background-color: #3d94f6;
	border: 1px solid #337fed;
	color: #ffffff;
	font-family: Arial;
	font-size: 15px;
	font-weight: bold;
	padding: 6px 24px;
	margin: 3px;
	text-decoration:none;
	text-shadow: 0px 1px 0px #1570cd;
	border-radius: 4px;
}

.buttons:hover {
	background-color: #00008b;
}

.button-group-upper,
.button-group-lower {
	list-style-type: none;
	margin: auto;
 	display: flex;
  	flex-direction: row;
  	justify-content: center;
  	flex-wrap: wrap;
}

.button-group-lower {
	text-align: center;
}

.answer-form {
	text-align: center;
	font-size: 18px;
	margin-top: 36px;
	margin-bottom: 36px;
}

#writeAnswer {
	font-size: 16px;
	padding: 5px;
	border: 2px solid #1e90ff;
}

.display-words {
	text-align: center;
}

.message-word {
	font-size: 17px;
	font-style: italic;
}

.question-word {
	font-size: 18px;
	font-weight: bold;
}

.display-no {
	display: none;
}

.display-yes {
	display: block;
}

.display-results {
	text-align: center;
}

.show-results {
	visibility: show;
}

.hide-results {
	visibility: hidden;
}

.display-answer-result {
	margin-top: 36px;
	margin-bottom: 36px;
}

.answer-result {
/*	text-align: center;*/
	font-size: 20px;
	font-weight: bold;
	margin-top: 18px;
	margin-bottom: 8px;
}
.correct-answer {
/*	text-align: center;*/
	font-size: 20px;
	margin-top: 3px;
	margin-bottom: 28px;
	color: #00f;
}
.not-correct-answer {
/*	text-align: center;*/
	font-size: 20px;
	margin-top: 3px;
	margin-bottom: 28px;
	color: #f00;
}

.display-complete-answer {
	text-align: center;
}

.complete-answer {
	/*text-align: center;*/
	font-size: 20px;
	margin-top: 3px;
	margin-bottom: 28px;
}

.check-answer {
	text-align: center;
}

</style>

</head>
<body>

	<h1 class='intro'>Learning Words</h1>
	<p class='main-content'>This page will help you to learn new words!</p>
	<p class='main-content main-content-info'>to start, choose a language and a level...</p>

<diV class='language-select'>

<form>
	<input type="radio" name="select-language" id="lang-en" value="en-words" checked="checked">
	<label for="lang-en">English words</label>
	<input type="radio" name="select-language" id="lang-gr" value="gr-words">
	<label for="lang-gr">Greek words</label>	
</form>

</diV>

	<ul class='button-group-upper'>
		<li><button class='buttons button-1' type='button'>Level 1</button></li>
		<li><button class='buttons button-2' type='button'>Level 2</button></li>
		<li><button class='buttons button-3' type='button'>Level 3</button></li>
		<li><button class='buttons button-4' type='button'>Level 4</button></li>
		<li><button class='buttons button-5' type='button'>Level 5</button></li>
	</ul>

<div class='display-option display-no'>

	<div class="display-words">
		<p class="message-word">...and now, please, write the meaning of the word:</p>
		<p class="question-word">English or Greek Word</p>
	
	</div>

<!-- 	<form action='javascript:handleForm()' class='answer-form'>
		<label for='writeAnswer'>Answer:</label>
		<input type='text' name='write-answer' id='writeAnswer' autocomplete='off'>
		<input type='submit' value='Submit answer'>
		<input type="reset" value="Reset">
	</form> -->

	<form class='answer-form' action='javascript:handleForm()'>
		<label for='writeAnswer'>Answer:</label>
		<input type='text' name='write-answer' id='writeAnswer' autocomplete='off'>
		<input type="reset" value="Reset">
	</form>

<!-- 
	Displays either "Correct answer!" or "The correct answer is:".
	The text is hidden and appears as soon as we subit an answer.
	Classes "status-show-result" and "status-hide-result" allow to show or hide this text.
	The functions "correctAnswer()" and "notCorrectAnswer()" control this behavior.
-->

<section class='display-results show-results'>

	<div class='display-answer-result'>
		<p class='answer-result'>Display answer correct or not correct</p>
	</div>

	<!--
		If the answer is not correct, it displays the correct word or the correct words.
		This text is hidden and appears only whenever an answer is not correct.
	 	Classes "status-show-answer" and "status-hide-answer" allow to show or hide this text.
	 	The functions ... control this behavior.
	-->
	<div class='display-complete-answer'>
		<p class='complete-answer'>After check, always display the complete answer</p>
	</div>

</section >

	<ul class='button-group-lower'>
		<li><button class='buttons button-6' type='button'>Previous Question</button></li>
		<li><button class='buttons button-7' type='button'>Check Answer</button></li>
		<li><button class='buttons button-8' type='button'>Next Question </button></li>
	</ul>

</div>

<script>

let wordQuiz;
let randomWordQuiz;
let index;

enableListeners();

function englishWords() {
	let englishWordsCheck = document.getElementById('lang-en').checked;
	let greekWordsCheck = document.getElementById('lang-gr').checked;
	if (!englishWordsCheck && !greekWordsCheck) {
		englishWordsCheck = true;
	}
	return englishWordsCheck;
}

function enableListeners() {
	const buttonListUpper = document.querySelector('.button-group-upper');
	buttonListUpper.addEventListener('click', activateButtons);
	const buttonListLower = document.querySelector('.button-group-lower');
	buttonListLower.addEventListener('click', activateButtons);	
}

function activateButtons(evt) {
	if (evt.target.classList.contains('button-1')) {
		wordQuiz = myWords01;
		initializeGame();
	}
	if (evt.target.classList.contains('button-2')) {
		wordQuiz = myWords02;
		initializeGame();
	}
	if (evt.target.classList.contains('button-3')) {
		wordQuiz = myWords03;
		initializeGame();	
	}
	if (evt.target.classList.contains('button-4')) {
		wordQuiz = myWords04;
		initializeGame();
	}
	if (evt.target.classList.contains('button-5')) {
		wordQuiz = myWords05;
		initializeGame();
	}
	if (evt.target.classList.contains('button-6')) {
		previousQuestion();

	}
	if (evt.target.classList.contains('button-7')) {
		if (index >= 0 && index < randomWordQuiz.length) {
			checkAnswer();
			showResults();
		}
		
	}
	if (evt.target.classList.contains('button-8')) {
		nextQuestion();
	}
}

function initializeGame() {
	index = 0;
	clearForm();
	startQuiz();
	questWord();
}

// randomizeArray(randArray) randomizes an array
// by taking out the first element and then
// placing it back at a random position
// inside the array. This process is repeated
// for every element of the array.
function randomizeArray(randArray) {
	for (let i = 0; i < randArray.length; i++) {
		let firstElement = randArray.shift();
		randArray.splice(randomNumber(randArray.length), 0, firstElement);
	}
	return randArray;
}

// randomNumber(max) returns a random integer
// between 0 and max (including 0 and max)
function randomNumber(max) {
	let randNum = Math.floor(Math.random()*(max+1));
	return randNum;
}

// randomNaturalNumber(max) returns a random integer
// between 1 and max (including 1 and max)
function randomNaturalNumber(max) {
	let randNatNum = Math.ceil(Math.random()*max);
	return randNatNum;
}

function startQuiz() {
	const displayStatus = document.querySelector('.display-option');
	if (displayStatus.className === 'display-option display-no') {
		displayStatus.className = 'display-option display-yes';
	}

	randomWordQuiz = randomizeArray(wordQuiz);
	arrowButtonListeners();
	hideResults();
}

function questWord() {
	const newWord = document.querySelector('.question-word');
	if (englishWords()) {
			newWord.innerHTML = randomWordQuiz[index][0];
	} else {
		let wordsLength = randomWordQuiz[index].length;
		let position = randomNaturalNumber(wordsLength-1);
		let greekWord = randomWordQuiz[index][position];
		newWord.innerHTML = greekWord;
	}
}

function levelStart() {
	const displayMessage = document.querySelector('.question-word');
	displayMessage.innerHTML = 'Level Start!';
}

function levelComplete() {
	const displayMessage = document.querySelector('.question-word');
	displayMessage.innerHTML = 'Level Completed!';
}

// checkAnswer() checks if the answer is correct or not.
// It checks every meaning of the english word and if the
// answer matches at least one of the meanings, then
// the answer is correct. For every meaning checked,
// a booleean value of true or false is added in the
// array called 'answerStaus'. In the end, the sum
// of all the elements in the array is calcualted.
// The result can be either 0 or 1 as the array
// contains only boolean values of true(1) and false(0).
// Each time, only one true can be included in the array
// and thus, the sum of the array can only be 1 or 0.
// If the sum is 1, then the answer was correct,
// otherwise, if the sum is 0, then the answer was not correct.
// For simplicity, the exact same logic is used when 
// comparing an Engish answer to a Greek word, although
// only one English answer can be correct in this case.
function checkAnswer() {

	let inputAnswer = document.getElementById('writeAnswer').value;

	let answerStatus = [];	

	if (englishWords()) {
		for (i = 1; i < randomWordQuiz[index].length; i++) {
			if (inputAnswer === randomWordQuiz[index][i]) {
				answerStatus.push(true);
			} else {
				answerStatus.push(false);
			}	
		}
	} else {
		if (inputAnswer === randomWordQuiz[index][0]) {
			answerStatus.push(true);
		} else {
			answerStatus.push(false);
		}
	}

	let answerSum = 0;

	for (i = 0;  i < answerStatus.length; i++) {
		answerSum += answerStatus[i];
	}

	if (answerSum === 1) {
		correctAnswer();
	} else {
		notCorrectAnswer();
	}
}

function showResults() {
	const displayOptions = document.querySelector('.display-results');
	displayOptions.className = 'display-results show-results';
}

function hideResults() {
	const displayOptions = document.querySelector('.display-results');
	displayOptions.className = 'display-results hide-results';
}

function correctAnswer() {
	const displayText = document.querySelector('.answer-result');
	displayText.className = 'answer-result correct-answer';
	displayText.innerHTML = 'Congratulations! Correct answer!';
	const displayWords = document.querySelector('.complete-answer');
	displayWords.className = 'complete-answer correct-answer';
	displayAllMeanings();
}

function notCorrectAnswer() {
	const displayText = document.querySelector('.answer-result');
	displayText.className = 'answer-result not-correct-answer';
	displayText.innerHTML = 'The correct answer is:';
	const displayWords = document.querySelector('.complete-answer');
	displayWords.className = 'complete-answer not-correct-answer';
	displayAllMeanings();
}

function displayAllMeanings() {
	const displayText = document.querySelector('.complete-answer');
	let translationsArray = randomWordQuiz[index];
	let joinedWords = translationsArray.join(' / ');
	displayText.innerHTML = joinedWords;
}

function clearForm() {
	document.getElementById('writeAnswer').value = null;
}

function handleForm() {
	if (index >= 0 && index < randomWordQuiz.length) {
		checkAnswer();
		showResults();
	}
}

function arrowButtonListeners() {

	document.addEventListener('keyup', function(evt) {
    let keyPressed = evt.key;

    if (keyPressed == 'ArrowLeft') {
    	previousQuestion();
    }

    if (keyPressed == 'ArrowRight') {
    	nextQuestion();
    }

});

}

function previousQuestion() {
	clearForm();
	hideResults();
	index--;
	if (index >= 0) {
		questWord();
	} else {
		index = -1;
		levelStart();
	}
}

function nextQuestion() {
	clearForm();
	hideResults();
	index++;
	if (index < randomWordQuiz.length) {
		questWord();
	} else {
		index = randomWordQuiz.length;
		levelComplete();
	}
}

</script>

</body>
</html>
